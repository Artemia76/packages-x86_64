description="The GRUB package contains the GRand Unified Bootloader."
url="http://www.gnu.org/software/grub/"

packager="tnut <tnut@nutyx.org>"
contributors="Pierre B, Schrodinger72"

name=grub
version=2.04
release=2

dejavu_version=2.37

makedepends=(automake m4 bison flex gettext textinfo python
             xz efibootmgr efivar freetype lvm2)

source=(http://downloads.sourceforge.net/dejavu/dejavu-fonts-ttf-${dejavu_version}.tar.bz2
        https://ftp.gnu.org/gnu/grub/grub-$version.tar.xz
	grub.cfg)

PKGMK_GROUPS=(man)

prepare() {
mv dejavu-fonts-ttf-${dejavu_version}/ttf/Deja* \
grub-$version
}

build() {
	cd grub-$version
	./configure --prefix=/usr \
	--sysconfdir=/etc         \
	--sbindir=/sbin           \
	--infodir=/usr/share/info \
	--enable-boot-time        \
	--disable-werror

	make

	make DESTDIR=$PKG install
        install -d $PKG/boot/grub
	install -Dm644 ../grub.cfg \
	$PKG/boot/grub/grub.cfg.exemple
}
