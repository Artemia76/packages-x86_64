description="Squashfs is a compressed read-only filesystem for Linux."
url="http://squashfs.sourceforge.net/"

maintainer="phillip at lougher.demon.co.uk"
contributors="Guy,Spiky"
packager="tnut <tnut@nutyx.org>"

makedepends=(sed zlib lzo xz lz4 zstd)

name=squashfs
version=4.5
release=2

source=(consolidate.patch
        http://downloads.sourceforge.net/sourceforge/$name/$name$version.tar.gz)
prepare() {
 cd $name-tools-$version
 patch -Np1 -i ../consolidate.patch
}
build() {
cd $name-tools-$version/squashfs-tools

make XZ_SUPPORT=1 LZO_SUPPORT=1 LZMA_XZ_SUPPORT=1 LZA_SUPPORT= \
ZSTD_SUPPORT=1 GZIP_SUPPORT=1 LZ4_SUPPORT=1 COMP_DEFAULT=zstd
mkdir -p $PKG/bin
make INSTALL_DIR=$PKG/bin install
}
