description="Feature-rich cron implementation"
url="http://fcron.free.fr"
contributors="pierre"
packager="greg<greg@nutyx.org>"

# Depends on: vim 

name=fcron
version=3.2.1
scripts=blfs-bootscripts
scriptsversion=20170611

release=1

source=(http://fcron.free.fr/archives/$name-$version.src.tar.gz )

prepare() {

	unset MAKEFLAGS
	source /etc/blfs-bootscripts                                                                                                            
	wget  http://www.linuxfromscratch.org/blfs/downloads/svn/$scripts-$scriptsversion.tar.bz2                                                
	tar xf $scripts-$scriptsversion.tar.bz2 

}


build() {

	cd $name-$version

	./configure --prefix=/usr --sysconfdir=/etc \
		--without-sendmail --localstatedir=/var \
		--with-boot-install=no --mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--with-systemdsystemunitdir=no

	make

}


package() {

	cd $name-$version

	make DESTDIR=$PKG install

	rm $PKG/etc/pam.conf
	mkdir -p $PKG/etc/pam.d
	
	for i in fcron fcrontab
	do install -D -m644 files/fcron.pam $PKG/etc/pam.d/$i
	
	done

# Install the script
cd ../$scripts-$scriptsversion

make DESTDIR=$PKG install-fcron

rm -rf $PKG/usr/share/doc

}
