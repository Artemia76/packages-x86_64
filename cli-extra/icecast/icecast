#!/bin/sh
#
# /etc/rc.d/icecast: start/stop icecast
#

case $1 in
start)
	/usr/bin/icecast -b -c /etc/icecast.xml
	;;
stop)
        if [ -f /var/run/icecast.pid ]; then
                kill $(< /var/run/icecast.pid)
                rm -f /var/run/icecast.pid
        else
                pkill /usr/bin/icecast
        fi
        ;;
reload)
        if [ -f /var/run/icecast.pid ]; then
                kill -HUP $(< /var/run/icecast.pid)
        else
                pkill -HUP /usr/bin/icecast
        fi
        ;;
restart)
	$0 stop
	sleep 2
	$0 start
	;;
*)
	echo "usage: $0 [start|stop|reload|restart]"
	;;
esac

# End of file
