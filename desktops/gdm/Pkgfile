description="Library for Graphical logins and managing local and remote displays."
url="http://www.gnome.org/"

packager="tnut <tnut@nutyx dot org>"
contributors="Fanch"

makedepends=(pam accountsservice nss libcanberra gnome-session upower)

set=(gnome)

name=gdm
version=3.38.2

source=(https://download.gnome.org/sources/$name/${version%.*}/$name-$version.tar.xz )

prepare() {
groupadd -g 21 gdm &&
useradd -c "GDM Daemon Owner" -d /var/lib/gdm -u 21 \
        -g gdm -s /bin/false gdm &&
passwd -ql gdm
}
build() {

cd $name-$version
mkdir build
cd    build
meson --prefix=/usr               \
      --sysconfdir=/etc           \
      --localstatedir=/var        \
      -Dplymouth=disabled         \
      -Dgdm-xsession=true         \
      -Dpam-mod-dir=/lib/security
ninja
DESTDIR=$PKG ninja install
}
