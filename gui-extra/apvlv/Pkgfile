# Description: apvlv is a PDF/DJVU/UMD/TXT Viewer and its behaviour like Vim.
# URL: http://github.com/naihe2010/apvlv
# Packager: alienus at nutyx dot org, tnut at nutyx dot org
# Depends on: git cmake webkitgtk2 djvulibre poppler-glib gtk2 gtk3 desktop-file-utils

name=apvlv
version=0.1.5
release=1

source=(https://github.com/naihe2010/apvlv/archive/v$version.tar.gz
        $name.desktop)

build(){
    cd $name-*
    mkdir -p build
    cd build
    CXX="g++ -std=c++98" cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr \
          -DAPVLV_WITH_DJVU=yes -DAPVLV_WITH_TXT=yes \
          -DAPVLV_WITH_UMD=no  ..
    make
    make DESTDIR=$PKG install

    # desktop integration
    install -Dm644 $SRC/$name.desktop \
        $PKG/usr/share/applications/$name.desktop
}
