description="Google Binaries, Web Browser"
url="https://dl.google.com/"
packager="pierre at nutyx dot org"

name=chrome
version=58.0.3029.110
release=1

PKGMK_KEEP_SOURCES='NO'

source=(https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb)

build() {
   cd $SRC
   ar x google-chrome-stable_current_amd64.deb
   tar xf data.tar.xz
   mkdir $PKG/{etc,usr,opt}
   cp -av etc/ $PKG/
   cp -av usr/ $PKG/
   cp -av opt/ $PKG/
   chown root:root -R $PKG/opt/google/chrome/chrome-sandbox
   chmod 4755 -R $PKG/opt/google/chrome/chrome-sandbox

# Launcher
mkdir -pv $PKG/usr/share/applications &&
cat > $PKG/usr/share/applications/chrome.desktop << "EOF" 
[Desktop Entry]
Encoding=UTF-8
Type=Application
Name=Google Chrome
Comment=Browse The Web
Icon=google-chrome
Exec=/usr/bin/google-chrome-stable
Categories=Network;GTK;Application;Browser;WebBrowser;
StartupNotify=true
Terminal=false
EOF

mkdir -pv $PKG/usr/share/pixmaps
ln -sf /opt/google/chrome/product_logo_256.png  $PKG/usr/share/pixmaps/google-chrome.png
}
