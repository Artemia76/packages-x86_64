description="Nextcloud desktop client"
url="http://nextcloud.com/"

packager="spiky <spiky@nutyx.org>"
maintainer="Schrodinger72 <schrodinger@nutyx.org>"

version=3.1.2

makedepends=(cmake extra-cmake-modules sqlite qtbase qtkeychain
             qtwebkit qtsvg qtwebengine qtwebkit xdg-utils qttools doxygen
             qtquickcontrols2 qtwebsockets)

PKGMK_KEEP_SOURCE="no"

source=(https://github.com/nextcloud/desktop/archive/v$version.tar.gz)

build() {

mkdir build
cd    build

cmake ../desktop-$version            \
        -DCMAKE_INSTALL_PREFIX=/usr \
        -DCMAKE_INSTALL_LIBDIR=lib  \
        -DCMAKE_BUILD_TYPE=Release  \
        -DCMAKE_INSTALL_SYSCONFDIR=/etc/$name \
        -DNO_SHIBBOLETH=1

make

make DESTDIR=$PKG install
}
