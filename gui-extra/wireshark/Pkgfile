# Depends on: gtk3 libpcap pcre hicolor-icon-theme

description="Network Sniffer with nice GTK+ UI"
url="http://www.wireshark.org"
packager="fanch,tnut"

name=wireshark
version=2.2.7
release=1

source=(https://www.$name.org/download/src/all-versions/$name-$version.tar.bz2)

build() {
  cd $name-$version

  ./configure --prefix=/usr \
              --with-plugins=/usr/lib/$name/plugins \
              --without-krb5 \
              --with-qt=no

  make
  make DESTDIR=$PKG install

  # install some icons
  install -d $PKG/usr/share/$name/pixmaps
  install -m 644 \
    image/{hi,lo}{16,32,48}-app-$name.png \
    $PKG/usr/share/$name/pixmaps

  # Don't remove these files, they are read by wireshark's about box.
  #rm -f $PKG/usr/share/$name/{AUTHORS-SHORT,COPYING}
}
