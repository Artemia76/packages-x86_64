description="Notify when upgraded packages will be automatically updated at shutdown"
url=https://github.com/NuTyX/cards-upgrade-notifier

packager="tnut <Å§nut@nutyx.org>"

name=cards-upgrade-notifier
version="$(date +%Y%m%d)"

makedepends=(gtk3)
run=(fcron)

PKGMK_KEEP_SOURCES="no"
# source=(https://github.com/NuTyX/cards-upgrade-notifier/archive/refs/tags/v$version.tar.gz)

source=(cards-upgrade-notifier-updates.png cards-upgrade-notifier.c upgrade-nutyx.in)

build() {

# cd $version/src
cc $name.c \
$(pkg-config --cflags --libs gtk+-3.0) -o $name

mkdir -p $PKG/{sbin,usr/{bin,share/pixmaps}}
install -m755 upgrade-nutyx.in $PKG/sbin/upgrade-nutyx
install -m755 $name $PKG/usr/bin/$name
install -m755 $name-updates.png \
$PKG/usr/share/pixmaps/$name-updates.png
}
