# Depends on: glib cairo glib icu freetype gobject-introspection git gtk-doc

description="OpenType text shaping engine"
url="http://www.freedesktop.org/software/harfbuzz"
packager="tnut <tnut@nutyx.org>"
contributors="Pierre B, Remy"

PKGMK_KEEP_SOURCES="no"

name=harfbuzz
version=1.7.5

source=(https://github.com/$name/$name/archive/$name.tar.gz)

prepare() {
    cd $name-$version
    NOCONFIGURE=1 ./autogen.sh
}

build() {
cd $name-$version

./configure --prefix=/usr \
            --with-cairo  \
            --with-freetype \
            --with-glib   \
            --with-gobject \
            --with-graphite2 \
            --with-icu \
            --enable-gtk-doc
            
sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool

make
}

package() {

make DESTDIR=$PKG install

}
