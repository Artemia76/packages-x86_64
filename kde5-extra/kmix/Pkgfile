# Depends on: alsa-lib pulseaudio libcanberra extra-cmake-modules plasma-framework kdelibs4support kdoctools

description="KDE volume control program"
url="http://kde.org/applications/multimedia/kmix/"
packager="tnut <tnut@nutyx.org>"
contributors="Pierre B"

name=kmix
version=17.08.0
release=1

source=(http://download.kde.org/stable/applications/$version/src/kmix-$version.tar.xz)

build() {
cd kmix-$version

sed -e 's|${ECM_MODULE_PATH} ${ECM_KDE_MODULE_DIR}|${ECM_MODULE_PATH} ${ECM_KDE_MODULE_DIR} ${CMAKE_SOURCE_DIR}/cmake/modules|' -i CMakeLists.txt

mkdir build
cd    build
cmake -DCMAKE_INSTALL_PREFIX=/usr \
      -DCMAKE_BUILD_TYPE=Release  \
      -DKDE_INSTALL_LIBDIR=lib       \
      -DKMIX_KF5_BUILD=ON         \
      -DBUILD_TESTING=OFF         \
      -Wno-dev ..
make
make DESTDIR=$PKG install
}
