# Description: Qt4 plugin which turns all QSystemTrayIcon into StatusNotifierItems (appindicators)
# URL: https://launchpad.net/sni-qt
# Packager: pierre at nutyx dot org
# Depends on: libdbusmenu-qt 

name=sni-qt
version=0.2.6
release=2

source=(http://launchpad.net/$name/trunk/$version/+download/$name-$version.tar.bz2)

build() {
mkdir build
sed -i '/tests/ d' $name-$version/CMakeLists.txt
cd build
cmake ../$name-$version         \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_BUILD_TYPE=Release

make
make DESTDIR=$PKG install

mkdir -pv $PKG/etc/xdg
cat > $PKG/etc/xdg/sni-qt.conf << "EOF"
[need-activate-action]
clementine=1
mumble=1
skype=1
speedcrunch=1
keepassx=1
EOF
}
