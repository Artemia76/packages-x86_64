# Description : This package going install KDE5 and its dependencies
# URL: https://www.kde.org/
# Packager: pierre at nutyx dot org, fanch at nutyx dot org, tnut at nutyx dot org
# Depends on : xorg  kf5 plasma oxygen-icons phonon-backend-gstreamer-qt5 oxygen-gtk2 oxygen-gtk3 gnupg 

run=(xorg  kf5 plasma oxygen-icons phonon-backend-gstreamer-qt5 oxygen-gtk2 oxygen-gtk3) 

name=kde5
release=1
version=20150816

source=()

build() {

mkdir -pv $PKG/etc/profile.d/

cat > $PKG/etc/profile.d/kde5.sh << "EOF"
#
### Begin /etc/profile.d/kf5.sh
#
source /etc/profile.d/qt5.sh
#
# Begin Qt5 changes for KDE5
#
pathappend $QT5DIR/lib/qt5/plugins  QT_PLUGIN_PATH
pathappend $QT5DIR/lib/qt5/qml      QML_IMPORT_PATH
pathappend $QT5DIR/lib/qt5/qml      QML2_IMPORT_PATH
#
# End Qt5 changes for KDE5
#
export KF5_PREFIX=/usr
export XDG_DATA_DIRS=$KF5_PREFIX/share:/usr/share
export XDG_CONFIG_DIRS=$KF5_PREFIX/etc/xdg:/etc/xdg
 
#
pathappend /usr/lib/qt5/plugins    QT_PLUGIN_PATH
pathappend $QT5DIR/lib/qt5/plugins QT_PLUGIN_PATH
#
pathappend /usr/lib/qt5/qml        QML_IMPORT_PATH
pathappend $QT5DIR/lib/qt5/qml     QML_IMPORT_PATH
#
pathappend /usr/lib/qt5/qml        QML2_IMPORT_PATH
pathappend $QT5DIR/lib/qt5/qml     QML2_IMPORT_PATH
#
### End /etc/profile.d/kde5.sh
EOF

mkdir -p $PKG/usr

}
