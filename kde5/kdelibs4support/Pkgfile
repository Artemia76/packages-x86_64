# Depends on: kded kauth kcodecs kcompletion kconfig kconfigwidgets kcoreaddons kcrash kdbusaddons kdesignerplugin kglobalaccel kguiaddons ki18n kiconthemes kio kitemviews kjobwidgets knotifications kparts kservice ktextwidgets kunitconversion kwidgetsaddons kwindowsystem kxmlgui solid kdoctools kemoticons kinit kitemmodels kdoctools openssl perl-uri networkmanager

description="Porting aid from KDELibs4 "
url="https://www.kde.org/"
packager="tnut <tnut@nutyx.org>"
contributors="Pierre B"

name=kdelibs4support
version=5.38.0
release=1

source=(kdelibs4support-openssl-1.1.patch
	http://download.kde.org/stable/frameworks/${version%.*}/portingAids/$name-$version.tar.xz)

build() {
cd $name-$version
patch -Np1 -i ../kdelibs4support-openssl-1.1.patch

sed -i "s:4.2:4.5:g" cmake/FindDocBookXML4.cmake

mkdir build
cd    build
cmake -DCMAKE_INSTALL_PREFIX=/usr \
      -DCMAKE_BUILD_TYPE=Release  \
      -DKDE_INSTALL_LIBDIR=lib       \
      -DBUILD_TESTING=OFF         \
      -Wno-dev ..
make
make DESTDIR=$PKG install
}
